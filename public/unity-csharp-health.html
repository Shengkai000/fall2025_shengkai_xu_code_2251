<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unity C# – 2D Health & Damage</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="shell">
    <header class="topbar">
      <a class="home" href="unity-csharp.html" aria-label="Back to Unity C#">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M15.7 4.3a1 1 0 0 1 0 1.4L10.4 11l5.3 5.3a1 1 0 0 1-1.4 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.4 0z"/>
        </svg>
      </a>
      <h1 class="page-title">2D Health & Damage</h1>
    </header>

    <main class="article-main">
      <article class="article">
        <header class="article-header reveal-on-scroll">
          <p class="meta">
            <span class="pill">Unity</span>
            <span class="pill">C#</span>
            <span class="pill pill-soft">2D Systems</span>
          </p>
          <h2>Reusable health component for 2D characters</h2>
          <p class="muted">
            Attach this script to any 2D character or enemy to give it health, take damage,
            and trigger a death callback. Easy to hook into animations or game over logic.
          </p>
        </header>

        <section class="reveal-on-scroll">
          <h3>Base snippet</h3>
          <pre><code id="snippet-code">
            
//Simple 2D health component.

using UnityEngine;
using UnityEngine.Events;

public class Health2D : MonoBehaviour
{
    [Header("Health Settings")]
    public int maxHealth = 5;
    public int currentHealth;

    [Header("Events")]
    public UnityEvent onDamaged;
    public UnityEvent onDied;

    void Awake()
    {
        currentHealth = maxHealth;
    }

    public void TakeDamage(int amount)
    {
        if (amount <= 0 || currentHealth <= 0) return;

        currentHealth -= amount;
        onDamaged?.Invoke();

        if (currentHealth <= 0)
        {
            currentHealth = 0;
            onDied?.Invoke();
        }
    }

    public void Heal(int amount)
    {
        if (amount <= 0 || currentHealth <= 0) return;

        currentHealth = Mathf.Min(currentHealth + amount, maxHealth);
    }
}
          </code></pre>
        </section>

        <section class="integration-block reveal-on-scroll">
          <h2>Integration Recipe</h2>
          <ol>
            <li>Attach <code>Health2D</code> to any 2D character or enemy GameObject.</li>
            <li>In the Inspector, set <strong>Max Health</strong> (for example, 5 or 10).</li>
            <li>Optional: hook <code>onDamaged</code> to play a hit animation or flash effect.</li>
            <li>Optional: hook <code>onDied</code> to play a death animation, disable controls, or destroy the GameObject.</li>
            <li>From other scripts (like bullets), call <code>GetComponent&lt;Health2D&gt;().TakeDamage(1);</code> when a hit occurs.</li>
          </ol>
        </section>

        <section class="integration-block reveal-on-scroll">
          <h2>Common Errors</h2>
          <ul>
            <li>
              <strong>No damage happens</strong> – Make sure your bullet or attacker script is actually calling
              <code>TakeDamage</code> on the correct GameObject.
            </li>
            <li>
              <strong>NullReferenceException</strong> – The object you expect to have <code>Health2D</code>
              might not have the component; use <code>GetComponent&lt;Health2D&gt;()</code> on the correct collider or parent.
            </li>
            <li>
              <strong>Health goes below zero</strong> – Ensure other scripts are not modifying
              <code>currentHealth</code> directly; always use <code>TakeDamage</code> and <code>Heal</code>.
            </li>
          </ul>
        </section>

        <section class="integration-block ai-block reveal-on-scroll">
          <h2>Ask AI about this snippet</h2>
          <p class="muted">
            Describe how your enemies or players are set up, and AI will suggest how to wire this health
            component into your collision or damage system.
          </p>
          <textarea
            id="ai-question"
            rows="4"
            placeholder="Example: My bullets use OnTriggerEnter2D with enemy colliders. How should I call Health2D.TakeDamage() correctly?"
          ></textarea>
          <button id="ai-ask-btn" class="secondary-btn">Ask AI</button>
          <div id="ai-answer" class="ai-answer" aria-live="polite"></div>
        </section>
      </article>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
